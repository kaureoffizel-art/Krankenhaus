<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prof. Dr. Kenan Privatklinik</title>
<style>
body{margin:0;font-family:'Segoe UI',sans-serif;background:#f4f8fb;}
header{background:#0b3d91;color:white;padding:20px;text-align:center;font-size:24px;}
.container{display:flex;min-height:calc(100vh - 70px);}
.sidebar{width:240px;background:#1455c3;color:white;padding:20px;}
.sidebar h2{text-align:center;}
.sidebar a{display:block;color:white;text-decoration:none;padding:10px;margin:8px 0;border-radius:6px;background:#1e67c1;}
.sidebar a:hover{background:#0b3d91;}
.main{flex:1;padding:20px;}
.card{background:white;padding:20px;margin-bottom:20px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.08);}
table{width:100%;border-collapse:collapse;}
table th,table td{border:1px solid #ddd;padding:10px;text-align:left;}
th{background:#e3ecff;}
button{padding:10px 16px;border:none;border-radius:6px;cursor:pointer;background:#0b3d91;color:white;margin-right:5px;}
button:hover{opacity:0.9;}
button.red{background:red;font-weight:bold;font-size:16px;}
input,select,textarea{width:100%;padding:10px;margin-bottom:10px;border-radius:6px;border:1px solid #ccc;}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;text-align:center;}
.calendar div{background:#e3ecff;padding:15px;border-radius:6px;}
</style>
</head>
<body>

<header>üè• Prof. Dr. Kenan Privatklinik</header>

<div class="container">
  <div class="sidebar">
    <h2>Navigation</h2>
    <a href="#" onclick="showSection('dashboard')">Dashboard</a>
    <a href="#" onclick="showSection('patients')">Patienten</a>
    <a href="#" onclick="showSection('calendar')">Kalender</a>
    <a href="#" onclick="showSection('admin')">Admin</a>
    <a href="#" onclick="logout()">Logout</a>
  </div>

  <div class="main">
    <!-- Login -->
    <div id="loginSection" class="card">
      <h2>Login</h2>
      <input id="loginUser" placeholder="Benutzername">
      <input id="loginPass" type="password" placeholder="Passwort">
      <button onclick="login()">Einloggen</button>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="card" style="display:none;">
      <h2>Dashboard</h2>
      <p id="totalPatients">Gesamt Patienten: 0</p>
      <p id="emergencies">Notf√§lle: 0</p>
      <p id="todayAppointments">Termine heute: 0</p>
    </div>

    <!-- Patientenverwaltung -->
    <div id="patients" class="card" style="display:none;">
      <h2>Patientenverwaltung</h2>
      <h3>Neuen Patienten hinzuf√ºgen</h3>
      <input id="pName" placeholder="Name">
      <input id="pDOB" type="date">
      <input id="pAddress" placeholder="Adresse">
      <input id="pPhone" placeholder="Telefon">
      <input id="pInsurance" placeholder="Versicherungsnummer">
      <label>Dringlichkeit:</label>
      <select id="pUrgency">
        <option value="1">1 - Kritisch</option>
        <option value="2">2 - Hoch</option>
        <option value="3">3 - Mittel</option>
        <option value="4">4 - Niedrig</option>
      </select>
      <button onclick="addPatient()">Patient speichern</button>
      <button class="red" onclick="emergencyPatient()">SCHNELL BEHANDELN</button>

      <h3>Patientenliste</h3>
      <input id="searchPatient" placeholder="Suchen..." onkeyup="renderPatients()">
      <table>
        <thead>
          <tr><th>Name</th><th>Geburtsdatum</th><th>Status</th><th>Dringlichkeit</th></tr>
        </thead>
        <tbody id="patientTable"></tbody>
      </table>
    </div>

    <!-- Kalender -->
    <div id="calendar" class="card" style="display:none;">
      <h2>Kalender</h2>
      <div class="calendar" id="calendarGrid"></div>
    </div>

    <!-- Admin -->
    <div id="admin" class="card" style="display:none;">
      <h2>Admin Panel</h2>
      <input id="newUser" placeholder="Benutzername">
      <input id="newPass" placeholder="Passwort">
      <select id="newRole">
        <option value="admin">Admin</option>
        <option value="doctor">Arzt</option>
        <option value="reception">Empfang</option>
      </select>
      <button onclick="createUser()">Benutzer erstellen</button>
      <h3>Benutzerliste</h3>
      <table>
        <thead>
          <tr><th>Benutzer</th><th>Rolle</th></tr>
        </thead>
        <tbody id="userTable"></tbody>
      </table>
    </div>

  </div>
</div>

<script>
// ====== Daten ======
let users = [{username:"admin",password:"admin",role:"admin"}];
let currentUser = null;
let patients = [];

// ====== Login ======
function login(){
  let u = document.getElementById("loginUser").value;
  let p = document.getElementById("loginPass").value;
  let user = users.find(x=>x.username===u && x.password===p);
  if(user){
    currentUser = user;
    alert("Erfolgreich eingeloggt als "+user.role);
    document.getElementById("loginSection").style.display="none";
    showSection("dashboard");
    renderUsers();
    renderPatients();
    renderCalendar();
  }else{
    alert("Login falsch");
    currentUser=null;
    hideAllSections();
  }
}

// ====== Logout ======
function logout(){
  currentUser=null;
  hideAllSections();
  document.getElementById("loginSection").style.display="block";
}

// ====== Zeige nur erlaubte Sections ======
function showSection(id){
  if(!currentUser){alert("Bitte einloggen"); return;}
  if(id==="admin" && currentUser.role!=="admin"){alert("Zugriff verweigert"); return;}
  ["dashboard","patients","calendar","admin"].forEach(s=>{
    document.getElementById(s).style.display = (s===id) ? "block":"none";
  });
}

// ====== Alle Sections ausblenden ======
function hideAllSections(){
  ["dashboard","patients","calendar","admin"].forEach(s=>{
    document.getElementById(s).style.display="none";
  });
}

// ====== Patienten ======
function addPatient(){
  if(!currentUser || (currentUser.role!=="admin" && currentUser.role!=="doctor" && currentUser.role!=="reception")){alert("Zugriff verweigert"); return;}
  let patient = {
    name:document.getElementById("pName").value,
    dob:document.getElementById("pDOB").value,
    address:document.getElementById("pAddress").value,
    phone:document.getElementById("pPhone").value,
    insurance:document.getElementById("pInsurance").value,
    urgency:document.getElementById("pUrgency").value,
    status:"Wartend"
  };
  patients.push(patient);
  renderPatients();
  renderCalendar();
}

function emergencyPatient(){
  if(!currentUser){alert("Zugriff verweigert"); return;}
  if(patients.length>0){
    patients[patients.length-1].urgency = "1";
    patients[patients.length-1].status = "Schnell Behandeln";
    renderPatients();
    renderCalendar();
  }
}

function renderPatients(){
  if(!currentUser){return;}
  let table = document.getElementById("patientTable");
  let search = document.getElementById("searchPatient").value.toLowerCase();
  table.innerHTML="";
  patients.filter(p=>p.name.toLowerCase().includes(search)).forEach(p=>{
    let tr = document.createElement("tr");
    tr.innerHTML=`<td>${p.name}</td><td>${p.dob}</td><td>${p.status}</td><td>${p.urgency}</td>`;
    table.appendChild(tr);
  });
}

// ====== Admin ======
function createUser(){
  if(!currentUser || currentUser.role!=="admin"){alert("Zugriff verweigert"); return;}
  let u = document.getElementById("newUser").value;
  let p = document.getElementById("newPass").value;
  let r = document.getElementById("newRole").value;
  users.push({username:u,password:p,role:r});
  renderUsers();
}

function renderUsers(){
  if(!currentUser || currentUser.role!=="admin"){return;}
  let table = document.getElementById("userTable");
  table.innerHTML="";
  users.forEach(u=>{
    let tr=document.createElement("tr");
    tr.innerHTML=`<td>${u.username}</td><td>${u.role}</td>`;
    table.appendChild(tr);
  });
}

// ====== Kalender (einfach Raster) ======
function renderCalendar(){
  if(!currentUser){return;}
  let grid = document.getElementById("calendarGrid");
  grid.innerHTML="";
  for(let i=1;i<=30;i++){
    let d = document.createElement("div");
    d.innerHTML="Tag "+i;
    grid.appendChild(d);
  }
}
</script>

</body>
</html>
